{"ast":null,"code":"import{useState,useEffect}from\"react\";import{getAttendanceRecords}from\"../../api/attendanceService\";import{Card,Button,Input,Select}from\"../../components/ui\";import{useToast}from\"../../hooks/useToast\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AttendanceList(){const[records,setRecords]=useState([]);const[loading,setLoading]=useState(true);const[filterStatus,setFilterStatus]=useState(\"\");// present/absent/leave\nconst[searchName,setSearchName]=useState(\"\");const toast=useToast();const fetchRecords=async()=>{setLoading(true);try{const data=await getAttendanceRecords();// Handle case where data might not be an array\nconst recordsArray=Array.isArray(data)?data:[];setRecords(recordsArray);}catch(err){toast.error(\"Failed to fetch attendance records.\");}finally{setLoading(false);}};useEffect(()=>{fetchRecords();},[]);const filteredRecords=records.filter(r=>{const matchesStatus=filterStatus?r.status===filterStatus:true;const matchesName=searchName?r.userName.toLowerCase().includes(searchName.toLowerCase()):true;return matchesStatus&&matchesName;});if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading attendance records...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Attendance Records\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 mb-4\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Search by name\",value:searchName,onChange:e=>setSearchName(e.target.value)}),/*#__PURE__*/_jsx(Select,{label:\"Status\",value:filterStatus,onChange:e=>setFilterStatus(e.target.value),options:[{label:\"All\",value:\"\"},{label:\"Present\",value:\"present\"},{label:\"Absent\",value:\"absent\"},{label:\"Leave\",value:\"leave\"}]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4\",children:[filteredRecords.length===0&&/*#__PURE__*/_jsx(\"div\",{children:\"No attendance records found.\"}),filteredRecords.map(record=>/*#__PURE__*/_jsx(Card,{className:\"flex justify-between items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:record.userName}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Date: \",record.date]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Status: \",record.status]})]})},record.id))]})]});}","map":{"version":3,"names":["useState","useEffect","getAttendanceRecords","Card","Button","Input","Select","useToast","jsx","_jsx","jsxs","_jsxs","AttendanceList","records","setRecords","loading","setLoading","filterStatus","setFilterStatus","searchName","setSearchName","toast","fetchRecords","data","recordsArray","Array","isArray","err","error","filteredRecords","filter","r","matchesStatus","status","matchesName","userName","toLowerCase","includes","children","className","placeholder","value","onChange","e","target","label","options","length","map","record","date","id"],"sources":["E:/EMS/frontend/src/pages/attendance/AttendanceList.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { getAttendanceRecords } from \"../../api/attendanceService\";\r\nimport { Card, Button, Input, Select } from \"../../components/ui\";\r\nimport { useToast } from \"../../hooks/useToast\";\r\n\r\nexport default function AttendanceList() {\r\n    const [records, setRecords] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filterStatus, setFilterStatus] = useState(\"\"); // present/absent/leave\r\n    const [searchName, setSearchName] = useState(\"\");\r\n    const toast = useToast();\r\n\r\n\r\n    const fetchRecords = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const data = await getAttendanceRecords();\r\n            // Handle case where data might not be an array\r\n            const recordsArray = Array.isArray(data) ? data : [];\r\n            setRecords(recordsArray);\r\n        } catch (err) {\r\n            toast.error(\"Failed to fetch attendance records.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchRecords();\r\n    }, []);\r\n\r\n    const filteredRecords = records.filter((r) => {\r\n        const matchesStatus = filterStatus ? r.status === filterStatus : true;\r\n        const matchesName = searchName\r\n            ? r.userName.toLowerCase().includes(searchName.toLowerCase())\r\n            : true;\r\n        return matchesStatus && matchesName;\r\n    });\r\n\r\n    if (loading) return <div>Loading attendance records...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"text-2xl font-bold mb-4\">Attendance Records</h1>\r\n\r\n            {/* Filters */}\r\n            <div className=\"flex gap-4 mb-4\">\r\n                <Input\r\n                    placeholder=\"Search by name\"\r\n                    value={searchName}\r\n                    onChange={(e) => setSearchName(e.target.value)}\r\n                />\r\n                <Select\r\n                    label=\"Status\"\r\n                    value={filterStatus}\r\n                    onChange={(e) => setFilterStatus(e.target.value)}\r\n                    options={[\r\n                        { label: \"All\", value: \"\" },\r\n                        { label: \"Present\", value: \"present\" },\r\n                        { label: \"Absent\", value: \"absent\" },\r\n                        { label: \"Leave\", value: \"leave\" },\r\n                    ]}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"grid gap-4\">\r\n                {filteredRecords.length === 0 && <div>No attendance records found.</div>}\r\n\r\n                {filteredRecords.map((record) => (\r\n                    <Card key={record.id} className=\"flex justify-between items-center\">\r\n                        <div>\r\n                            <div className=\"font-semibold\">{record.userName}</div>\r\n                            <div className=\"text-sm text-gray-600\">Date: {record.date}</div>\r\n                            <div className=\"text-sm text-gray-500\">Status: {record.status}</div>\r\n                        </div>\r\n                    </Card>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}