{"ast":null,"code":"import{useState,useEffect,useContext}from'react';import{AuthContext}from'../../context/AuthContext';import{getMyAttendance}from'../../api/attendanceService';import{Card}from'../../components/ui';import{useToast}from'../../hooks/useToast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EmployeeAttendance(){const{user}=useContext(AuthContext);const[attendance,setAttendance]=useState([]);const[loading,setLoading]=useState(true);const toast=useToast();useEffect(()=>{const fetchAttendanceData=async()=>{try{const data=await getMyAttendance();setAttendance(data);}catch(error){toast.error('Failed to fetch attendance data');console.error('Error fetching attendance:',error);}finally{setLoading(false);}};if(user!==null&&user!==void 0&&user.username){fetchAttendanceData();}},[user===null||user===void 0?void 0:user.username,toast]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading attendance records...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6\",children:\"My Attendance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:attendance.length===0?/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-500\",children:\"No attendance records found\"})}):attendance.map(record=>/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold\",children:[\"Date: \",new Date(record.checkIn).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Check In: \",new Date(record.checkIn).toLocaleTimeString()]}),record.checkOut&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Check Out: \",new Date(record.checkOut).toLocaleTimeString()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-1 rounded-full text-sm font-medium \".concat(record.checkOut?'bg-green-100 text-green-800':'bg-yellow-100 text-yellow-800'),children:record.checkOut?'Completed':'Active'})})]})},record.id))})]});}","map":{"version":3,"names":["useState","useEffect","useContext","AuthContext","getMyAttendance","Card","useToast","jsx","_jsx","jsxs","_jsxs","EmployeeAttendance","user","attendance","setAttendance","loading","setLoading","toast","fetchAttendanceData","data","error","console","username","children","className","length","map","record","Date","checkIn","toLocaleDateString","toLocaleTimeString","checkOut","concat","id"],"sources":["E:/EMS/frontend/src/pages/employees/EmployeeAttendance.jsx"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { getMyAttendance } from '../../api/attendanceService';\r\nimport { Card } from '../../components/ui';\r\nimport { useToast } from '../../hooks/useToast';\r\n\r\nexport default function EmployeeAttendance() {\r\n    const { user } = useContext(AuthContext);\r\n    const [attendance, setAttendance] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const toast = useToast();\r\n\r\n    useEffect(() => {\r\n        const fetchAttendanceData = async () => {\r\n            try {\r\n                const data = await getMyAttendance();\r\n                setAttendance(data);\r\n            } catch (error) {\r\n                toast.error('Failed to fetch attendance data');\r\n                console.error('Error fetching attendance:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (user?.username) {\r\n            fetchAttendanceData();\r\n        }\r\n    }, [user?.username, toast]);\r\n\r\n    if (loading) return <div>Loading attendance records...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"text-2xl font-bold mb-6\">My Attendance</h1>\r\n            <div className=\"grid gap-4\">\r\n                {attendance.length === 0 ? (\r\n                    <Card className=\"p-6\">\r\n                        <div className=\"text-center text-gray-500\">No attendance records found</div>\r\n                    </Card>\r\n                ) : (\r\n                    attendance.map((record) => (\r\n                        <Card key={record.id} className=\"p-6\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <div>\r\n                                    <div className=\"font-semibold\">\r\n                                        Date: {new Date(record.checkIn).toLocaleDateString()}\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-600\">\r\n                                        Check In: {new Date(record.checkIn).toLocaleTimeString()}\r\n                                    </div>\r\n                                    {record.checkOut && (\r\n                                        <div className=\"text-sm text-gray-600\">\r\n                                            Check Out: {new Date(record.checkOut).toLocaleTimeString()}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <div className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                                        record.checkOut ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\r\n                                    }`}>\r\n                                        {record.checkOut ? 'Completed' : 'Active'}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}