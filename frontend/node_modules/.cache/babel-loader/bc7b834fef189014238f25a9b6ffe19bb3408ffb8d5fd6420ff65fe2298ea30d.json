{"ast":null,"code":"import{useState,useEffect}from\"react\";import{getNotifications,deleteNotification}from\"../../api/notificationService\";import{Card,Button}from\"../../components/ui\";import{useToast}from\"../../hooks/useToast\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function NotificationList(){const[notifications,setNotifications]=useState([]);const[loading,setLoading]=useState(true);const[actionLoading,setActionLoading]=useState(null);// id being deleted\nconst toast=useToast();const fetchNotifications=async()=>{setLoading(true);try{const data=await getNotifications();setNotifications(data);}catch(_unused){toast.error(\"Failed to fetch notifications.\");}finally{setLoading(false);}};useEffect(()=>{fetchNotifications();},[]);const handleDelete=async id=>{setActionLoading(id);try{await deleteNotification(id);toast.success(\"Notification deleted successfully!\");fetchNotifications();}catch(_unused2){toast.error(\"Failed to delete notification.\");}finally{setActionLoading(null);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading notifications...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Sent Notifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4\",children:[notifications.length===0&&/*#__PURE__*/_jsx(\"div\",{children:\"No notifications found.\"}),notifications.map(n=>/*#__PURE__*/_jsxs(Card,{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:n.subject}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:n.body}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Sent to: \",n.to]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-400\",children:[\"Date: \",n.date]})]}),/*#__PURE__*/_jsx(Button,{variant:\"destructive\",size:\"small\",onClick:()=>handleDelete(n.id),disabled:actionLoading===n.id,children:actionLoading===n.id?\"Deleting...\":\"Delete\"})]},n.id))]})]});}","map":{"version":3,"names":["useState","useEffect","getNotifications","deleteNotification","Card","Button","useToast","jsx","_jsx","jsxs","_jsxs","NotificationList","notifications","setNotifications","loading","setLoading","actionLoading","setActionLoading","toast","fetchNotifications","data","_unused","error","handleDelete","id","success","_unused2","children","className","length","map","n","subject","body","to","date","variant","size","onClick","disabled"],"sources":["E:/EMS/frontend/src/pages/notification/NotificationList.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { getNotifications, deleteNotification } from \"../../api/notificationService\";\r\nimport { Card, Button } from \"../../components/ui\";\r\nimport { useToast } from \"../../hooks/useToast\";\r\n\r\nexport default function NotificationList() {\r\n    const [notifications, setNotifications] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [actionLoading, setActionLoading] = useState(null); // id being deleted\r\n    const toast = useToast();\r\n\r\n\r\n    const fetchNotifications = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const data = await getNotifications();\r\n            setNotifications(data);\r\n        } catch {\r\n            toast.error(\"Failed to fetch notifications.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchNotifications();\r\n    }, []);\r\n\r\n    const handleDelete = async (id) => {\r\n        setActionLoading(id);\r\n        try {\r\n            await deleteNotification(id);\r\n            toast.success(\"Notification deleted successfully!\");\r\n            fetchNotifications();\r\n        } catch {\r\n            toast.error(\"Failed to delete notification.\");\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div>Loading notifications...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"text-2xl font-bold mb-4\">Sent Notifications</h1>\r\n            <div className=\"grid gap-4\">\r\n                {notifications.length === 0 && <div>No notifications found.</div>}\r\n                {notifications.map((n) => (\r\n                    <Card key={n.id} className=\"flex justify-between items-center\">\r\n                        <div>\r\n                            <div className=\"font-semibold\">{n.subject}</div>\r\n                            <div className=\"text-sm text-gray-600\">{n.body}</div>\r\n                            <div className=\"text-sm text-gray-500\">Sent to: {n.to}</div>\r\n                            <div className=\"text-sm text-gray-400\">Date: {n.date}</div>\r\n                        </div>\r\n                        <Button\r\n                            variant=\"destructive\"\r\n                            size=\"small\"\r\n                            onClick={() => handleDelete(n.id)}\r\n                            disabled={actionLoading === n.id}\r\n                        >\r\n                            {actionLoading === n.id ? \"Deleting...\" : \"Delete\"}\r\n                        </Button>\r\n                    </Card>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}