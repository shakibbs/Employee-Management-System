{"ast":null,"code":"import _objectSpread from\"E:/EMS/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from'react';import{useNavigate}from'react-router-dom';import{useContext}from'react';import{AuthContext}from'../../context/AuthContext';import{createLeaveRequest}from'../../api/leaveService';import{Card,Input,Button,Select}from'../../components/ui';import{useToast}from'../../hooks/useToast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LeaveRequestForm(){const{user}=useContext(AuthContext);const navigate=useNavigate();const toast=useToast();const[loading,setLoading]=useState(false);const[form,setForm]=useState({reason:'',startDate:'',endDate:'',leaveType:'SICK'});const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{await createLeaveRequest(_objectSpread(_objectSpread({},form),{},{employeeUsername:user.username}));toast.success('Leave request submitted successfully!');navigate('/my-leave-requests');}catch(error){toast.error('Failed to submit leave request');console.error('Error submitting leave request:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6\",children:\"Request Leave\"}),/*#__PURE__*/_jsx(Card,{className:\"max-w-2xl mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Leave Type\"}),/*#__PURE__*/_jsx(Select,{name:\"leaveType\",value:form.leaveType,onChange:handleChange,options:[{label:'Sick Leave',value:'SICK'},{label:'Casual Leave',value:'CASUAL'},{label:'Annual Leave',value:'ANNUAL'}]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Start Date\"}),/*#__PURE__*/_jsx(Input,{name:\"startDate\",type:\"date\",value:form.startDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"End Date\"}),/*#__PURE__*/_jsx(Input,{name:\"endDate\",type:\"date\",value:form.endDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Reason\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"reason\",value:form.reason,onChange:handleChange,required:true,rows:\"4\",className:\"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\",placeholder:\"Enter reason for leave request\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:loading,className:\"w-full\",children:loading?'Submitting...':'Submit Leave Request'})]})})]});}","map":{"version":3,"names":["useState","useNavigate","useContext","AuthContext","createLeaveRequest","Card","Input","Button","Select","useToast","jsx","_jsx","jsxs","_jsxs","LeaveRequestForm","user","navigate","toast","loading","setLoading","form","setForm","reason","startDate","endDate","leaveType","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","employeeUsername","username","success","error","console","children","className","onSubmit","onChange","options","label","type","required","rows","placeholder","disabled"],"sources":["E:/EMS/frontend/src/pages/employees/LeaveRequestForm.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useContext } from 'react';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { createLeaveRequest } from '../../api/leaveService';\r\nimport { Card, Input, Button, Select } from '../../components/ui';\r\nimport { useToast } from '../../hooks/useToast';\r\n\r\nexport default function LeaveRequestForm() {\r\n    const { user } = useContext(AuthContext);\r\n    const navigate = useNavigate();\r\n    const toast = useToast();\r\n    const [loading, setLoading] = useState(false);\r\n    const [form, setForm] = useState({\r\n        reason: '',\r\n        startDate: '',\r\n        endDate: '',\r\n        leaveType: 'SICK'\r\n    });\r\n\r\n    const handleChange = (e) => {\r\n        setForm({ ...form, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        \r\n        try {\r\n            await createLeaveRequest({\r\n                ...form,\r\n                employeeUsername: user.username\r\n            });\r\n            toast.success('Leave request submitted successfully!');\r\n            navigate('/my-leave-requests');\r\n        } catch (error) {\r\n            toast.error('Failed to submit leave request');\r\n            console.error('Error submitting leave request:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"text-2xl font-bold mb-6\">Request Leave</h1>\r\n            <Card className=\"max-w-2xl mx-auto\">\r\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Leave Type</label>\r\n                        <Select\r\n                            name=\"leaveType\"\r\n                            value={form.leaveType}\r\n                            onChange={handleChange}\r\n                            options={[\r\n                                { label: 'Sick Leave', value: 'SICK' },\r\n                                { label: 'Casual Leave', value: 'CASUAL' },\r\n                                { label: 'Annual Leave', value: 'ANNUAL' }\r\n                            ]}\r\n                        />\r\n                    </div>\r\n                    \r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Start Date</label>\r\n                        <Input\r\n                            name=\"startDate\"\r\n                            type=\"date\"\r\n                            value={form.startDate}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    \r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">End Date</label>\r\n                        <Input\r\n                            name=\"endDate\"\r\n                            type=\"date\"\r\n                            value={form.endDate}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    \r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Reason</label>\r\n                        <textarea\r\n                            name=\"reason\"\r\n                            value={form.reason}\r\n                            onChange={handleChange}\r\n                            required\r\n                            rows=\"4\"\r\n                            className=\"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                            placeholder=\"Enter reason for leave request\"\r\n                        />\r\n                    </div>\r\n                    \r\n                    <Button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full\"\r\n                    >\r\n                        {loading ? 'Submitting...' : 'Submit Leave Request'}\r\n                    </Button>\r\n                </form>\r\n            </Card>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}