{"ast":null,"code":"var _jsxFileName = \"E:\\\\EMS\\\\frontend\\\\src\\\\pages\\\\employees\\\\EmployeeAttendance.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../../context/AuthContext';\nimport { getMyAttendance } from '../../api/attendanceService';\nimport { Card } from '../../components/ui';\nimport { useToast } from '../../hooks/useToast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EmployeeAttendance() {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [attendance, setAttendance] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const toast = useToast();\n  useEffect(() => {\n    const fetchAttendanceData = async () => {\n      try {\n        const data = await getMyAttendance();\n        setAttendance(data);\n      } catch (error) {\n        var _error$response;\n        // Only show error message once, not in infinite loop\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 403) {\n          toast.error('Access denied. You may not have the proper permissions.');\n        } else {\n          toast.error('Failed to fetch attendance data');\n        }\n        console.error('Error fetching attendance:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (user !== null && user !== void 0 && user.username) {\n      fetchAttendanceData();\n    }\n  }, [user === null || user === void 0 ? void 0 : user.username]); // Remove toast from dependencies to prevent infinite loop\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading attendance records...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-6\",\n      children: \"My Attendance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid gap-4\",\n      children: attendance.length === 0 ? /*#__PURE__*/_jsxDEV(Card, {\n        className: \"p-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-gray-500\",\n          children: \"No attendance records found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }, this) : attendance.map(record => /*#__PURE__*/_jsxDEV(Card, {\n        className: \"p-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold\",\n              children: [\"Date: \", new Date(record.checkIn).toLocaleDateString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Check In: \", new Date(record.checkIn).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 37\n            }, this), record.checkOut && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Check Out: \", new Date(record.checkOut).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-right\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `px-3 py-1 rounded-full text-sm font-medium ${record.checkOut ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}`,\n              children: record.checkOut ? 'Completed' : 'Active'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 29\n        }, this)\n      }, record.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}\n_s(EmployeeAttendance, \"mhL4Aq0FrpjCKcn8v1ob6eBZgOQ=\", false, function () {\n  return [useToast];\n});\n_c = EmployeeAttendance;\nvar _c;\n$RefreshReg$(_c, \"EmployeeAttendance\");","map":{"version":3,"names":["useState","useEffect","useContext","AuthContext","getMyAttendance","Card","useToast","jsxDEV","_jsxDEV","EmployeeAttendance","_s","user","attendance","setAttendance","loading","setLoading","toast","fetchAttendanceData","data","error","_error$response","response","status","console","username","children","fileName","_jsxFileName","lineNumber","columnNumber","className","length","map","record","Date","checkIn","toLocaleDateString","toLocaleTimeString","checkOut","id","_c","$RefreshReg$"],"sources":["E:/EMS/frontend/src/pages/employees/EmployeeAttendance.jsx"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { getMyAttendance } from '../../api/attendanceService';\r\nimport { Card } from '../../components/ui';\r\nimport { useToast } from '../../hooks/useToast';\r\n\r\nexport default function EmployeeAttendance() {\r\n    const { user } = useContext(AuthContext);\r\n    const [attendance, setAttendance] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const toast = useToast();\r\n\r\n    useEffect(() => {\r\n        const fetchAttendanceData = async () => {\r\n            try {\r\n                const data = await getMyAttendance();\r\n                setAttendance(data);\r\n            } catch (error) {\r\n                // Only show error message once, not in infinite loop\r\n                if (error.response?.status === 403) {\r\n                    toast.error('Access denied. You may not have the proper permissions.');\r\n                } else {\r\n                    toast.error('Failed to fetch attendance data');\r\n                }\r\n                console.error('Error fetching attendance:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (user?.username) {\r\n            fetchAttendanceData();\r\n        }\r\n    }, [user?.username]); // Remove toast from dependencies to prevent infinite loop\r\n\r\n    if (loading) return <div>Loading attendance records...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"text-2xl font-bold mb-6\">My Attendance</h1>\r\n            <div className=\"grid gap-4\">\r\n                {attendance.length === 0 ? (\r\n                    <Card className=\"p-6\">\r\n                        <div className=\"text-center text-gray-500\">No attendance records found</div>\r\n                    </Card>\r\n                ) : (\r\n                    attendance.map((record) => (\r\n                        <Card key={record.id} className=\"p-6\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <div>\r\n                                    <div className=\"font-semibold\">\r\n                                        Date: {new Date(record.checkIn).toLocaleDateString()}\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-600\">\r\n                                        Check In: {new Date(record.checkIn).toLocaleTimeString()}\r\n                                    </div>\r\n                                    {record.checkOut && (\r\n                                        <div className=\"text-sm text-gray-600\">\r\n                                            Check Out: {new Date(record.checkOut).toLocaleTimeString()}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <div className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                                        record.checkOut ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\r\n                                    }`}>\r\n                                        {record.checkOut ? 'Completed' : 'Active'}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}