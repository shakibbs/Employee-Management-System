{"ast":null,"code":"import{useEffect,useState}from\"react\";import{getEmployees,deleteEmployee}from\"../../api/employeeService\";import{Button,Card}from\"../../components/ui\";import{useNavigate}from\"react-router-dom\";import{useToast}from\"../../hooks/useToast\";import{useContext}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EmployeeList(){const navigate=useNavigate();const[employees,setEmployees]=useState([]);const[loading,setLoading]=useState(true);const toast=useToast();const{user}=useContext(AuthContext);const fetchEmployees=async()=>{setLoading(true);try{const data=await getEmployees();// Handle case where data might not be an array\nconst employeesArray=Array.isArray(data)?data:[];setEmployees(employeesArray);}catch(_unused){toast.error(\"Failed to fetch employees.\");}finally{setLoading(false);}};useEffect(()=>{fetchEmployees();},[]);const handleDelete=async id=>{if(!confirm(\"Delete this employee?\"))return;try{await deleteEmployee(id);toast.success(\"Employee deleted successfully!\");fetchEmployees();}catch(err){toast.error(\"Failed to delete employee!\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold\",children:\"Employees\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate(\"/employees/add\"),size:\"small\",className:\"text-xs py-0.5 px-2 h-7\",children:\"Add Employee\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:employees.map(emp=>/*#__PURE__*/_jsxs(Card,{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold\",children:[emp.firstName,\" \",emp.lastName]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:emp.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>navigate(\"/employees/\".concat(emp.id,\"/edit\")),children:\"Edit\"}),(user===null||user===void 0?void 0:user.role)==='ADMIN'&&/*#__PURE__*/_jsx(Button,{variant:\"destructive\",onClick:()=>handleDelete(emp.id),children:\"Delete\"})]})]},emp.id))})]});}","map":{"version":3,"names":["useEffect","useState","getEmployees","deleteEmployee","Button","Card","useNavigate","useToast","useContext","AuthContext","jsx","_jsx","jsxs","_jsxs","EmployeeList","navigate","employees","setEmployees","loading","setLoading","toast","user","fetchEmployees","data","employeesArray","Array","isArray","_unused","error","handleDelete","id","confirm","success","err","children","className","onClick","size","map","emp","firstName","lastName","email","variant","concat","role"],"sources":["E:/EMS/frontend/src/pages/employees/EmployeeList.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { getEmployees, deleteEmployee } from \"../../api/employeeService\";\r\nimport { Button, Card } from \"../../components/ui\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useToast } from \"../../hooks/useToast\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function EmployeeList() {\r\n    const navigate = useNavigate();\r\n    const [employees, setEmployees] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const toast = useToast();\r\n    const { user } = useContext(AuthContext);\r\n\r\n    const fetchEmployees = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const data = await getEmployees();\r\n            // Handle case where data might not be an array\r\n            const employeesArray = Array.isArray(data) ? data : [];\r\n            setEmployees(employeesArray);\r\n        } catch {\r\n            toast.error(\"Failed to fetch employees.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchEmployees();\r\n    }, []);\r\n\r\n    const handleDelete = async (id) => {\r\n        if (!confirm(\"Delete this employee?\")) return;\r\n        try {\r\n            await deleteEmployee(id);\r\n            toast.success(\"Employee deleted successfully!\");\r\n            fetchEmployees();\r\n        } catch (err) {\r\n            toast.error(\"Failed to delete employee!\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"flex justify-between mb-4\">\r\n                <h1 className=\"text-2xl font-semibold\">Employees</h1>\r\n                <Button onClick={() => navigate(\"/employees/add\")} size=\"small\" className=\"text-xs py-0.5 px-2 h-7\">Add Employee</Button>\r\n            </div>\r\n\r\n            {loading ? (\r\n                <div>Loading...</div>\r\n            ) : (\r\n                <div className=\"grid gap-4\">\r\n                    {employees.map((emp) => (\r\n                        <Card key={emp.id} className=\"flex justify-between items-center\">\r\n                            <div>\r\n                                <div className=\"font-semibold\">{emp.firstName} {emp.lastName}</div>\r\n                                <div className=\"text-sm text-gray-600\">{emp.email}</div>\r\n                            </div>\r\n                            <div className=\"flex gap-2\">\r\n                                <Button variant=\"outline\" onClick={() => navigate(`/employees/${emp.id}/edit`)}>Edit</Button>\r\n                                {user?.role === 'ADMIN' && (\r\n                                    <Button variant=\"destructive\" onClick={() => handleDelete(emp.id)}>Delete</Button>\r\n                                )}\r\n                            </div>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}