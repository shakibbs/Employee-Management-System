{"ast":null,"code":"import _objectSpread from\"E:/EMS/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Input,Button,Select}from'../ui';import{useState,useEffect,useCallback}from'react';import{getDepartments}from'../../api/departmentService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EmployeeForm(_ref){let{initialData={},onSubmit,loading}=_ref;const[form,setForm]=useState(_objectSpread({firstName:'',lastName:'',email:'',position:'',salary:'',departmentId:'',password:'',role:'EMPLOYEE'},initialData));const[departments,setDepartments]=useState([]);const[loadingDepartments,setLoadingDepartments]=useState(false);useEffect(()=>{if(initialData&&Object.keys(initialData).length>0){setForm(prevForm=>_objectSpread(_objectSpread({},prevForm),initialData));}},[JSON.stringify(initialData)]);useEffect(()=>{const fetchDepartments=async()=>{setLoadingDepartments(true);try{const data=await getDepartments();setDepartments(Array.isArray(data)?data:[]);}catch(error){console.error('Error fetching departments:',error);setDepartments([]);}finally{setLoadingDepartments(false);}};fetchDepartments();},[]);const handleChange=useCallback(e=>{const{name,value}=e.target;setForm(prevForm=>_objectSpread(_objectSpread({},prevForm),{},{[name]:value}));},[]);const submitHandler=e=>{e.preventDefault();onSubmit(form);};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"bg-white p-8 rounded-lg shadow-lg max-w-2xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Input,{label:\"First Name (Required)\",name:\"firstName\",value:form.firstName,onChange:handleChange,required:true,placeholder:\"Enter first name\",autoComplete:\"given-name\"}),/*#__PURE__*/_jsx(Input,{label:\"Last Name (Required)\",name:\"lastName\",value:form.lastName,onChange:handleChange,required:true,placeholder:\"Enter last name\",autoComplete:\"family-name\"}),/*#__PURE__*/_jsx(Input,{label:\"Email Address (Required)\",name:\"email\",type:\"email\",value:form.email,onChange:handleChange,required:true,placeholder:\"Enter unique email\",autoComplete:\"email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Input,{label:\"Position (Optional)\",name:\"position\",value:form.position,onChange:handleChange,placeholder:\"Enter job position\",autoComplete:\"organization-title\"}),/*#__PURE__*/_jsx(Input,{label:\"Salary (Optional)\",name:\"salary\",type:\"number\",step:\"0.01\",value:form.salary,onChange:handleChange,placeholder:\"Enter salary amount\",autoComplete:\"off\"}),!initialData.id&&/*#__PURE__*/_jsx(Input,{label:\"Password (Required)\",name:\"password\",type:\"password\",value:form.password,onChange:handleChange,required:true,placeholder:\"Enter password\",autoComplete:\"new-password\"}),!initialData.id&&/*#__PURE__*/_jsx(Select,{label:\"Role (Required)\",name:\"role\",value:form.role,onChange:handleChange,options:[{label:'Employee',value:'EMPLOYEE'},{label:'HR',value:'HR'},{label:'Admin',value:'ADMIN'}],placeholder:\"Select role\"}),/*#__PURE__*/_jsx(Select,{label:\"Department (Optional)\",name:\"departmentId\",value:form.departmentId,onChange:handleChange,loading:loadingDepartments?'true':undefined,options:departments.map(dept=>({label:dept.name,value:dept.id.toString()})),placeholder:\"Select department\"})]})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",size:\"small\",className:\"mt-4\",disabled:loading,children:loading?'Saving...':'Save'})]});}","map":{"version":3,"names":["Input","Button","Select","useState","useEffect","useCallback","getDepartments","jsx","_jsx","jsxs","_jsxs","EmployeeForm","_ref","initialData","onSubmit","loading","form","setForm","_objectSpread","firstName","lastName","email","position","salary","departmentId","password","role","departments","setDepartments","loadingDepartments","setLoadingDepartments","Object","keys","length","prevForm","JSON","stringify","fetchDepartments","data","Array","isArray","error","console","handleChange","e","name","value","target","submitHandler","preventDefault","className","children","label","onChange","required","placeholder","autoComplete","type","step","id","options","undefined","map","dept","toString","size","disabled"],"sources":["E:/EMS/frontend/src/components/forms/EmployeeForm.jsx"],"sourcesContent":["import { Input, Button, Select } from '../ui';\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { getDepartments } from '../../api/departmentService';\r\n\r\nexport default function EmployeeForm({ initialData = {}, onSubmit, loading }) {\r\n    const [form, setForm] = useState({\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        position: '',\r\n        salary: '',\r\n        departmentId: '',\r\n        password: '',\r\n        role: 'EMPLOYEE',\r\n        ...initialData,\r\n    });\r\n    \r\n    const [departments, setDepartments] = useState([]);\r\n    const [loadingDepartments, setLoadingDepartments] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (initialData && Object.keys(initialData).length > 0) {\r\n            setForm(prevForm => ({ ...prevForm, ...initialData }));\r\n        }\r\n    }, [JSON.stringify(initialData)]);\r\n\r\n    useEffect(() => {\r\n        const fetchDepartments = async () => {\r\n            setLoadingDepartments(true);\r\n            try {\r\n                const data = await getDepartments();\r\n                setDepartments(Array.isArray(data) ? data : []);\r\n            } catch (error) {\r\n                console.error('Error fetching departments:', error);\r\n                setDepartments([]);\r\n            } finally {\r\n                setLoadingDepartments(false);\r\n            }\r\n        };\r\n        \r\n        fetchDepartments();\r\n    }, []);\r\n\r\n    const handleChange = useCallback((e) => {\r\n        const { name, value } = e.target;\r\n        setForm(prevForm => ({ ...prevForm, [name]: value }));\r\n    }, []);\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        onSubmit(form);\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={submitHandler} className=\"bg-white p-8 rounded-lg shadow-lg max-w-2xl mx-auto\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div className=\"space-y-4\">\r\n                    <Input label=\"First Name (Required)\" name=\"firstName\" value={form.firstName} onChange={handleChange} required placeholder=\"Enter first name\" autoComplete=\"given-name\" />\r\n                    <Input label=\"Last Name (Required)\" name=\"lastName\" value={form.lastName} onChange={handleChange} required placeholder=\"Enter last name\" autoComplete=\"family-name\" />\r\n                    <Input label=\"Email Address (Required)\" name=\"email\" type=\"email\" value={form.email} onChange={handleChange} required placeholder=\"Enter unique email\" autoComplete=\"email\" />\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                    <Input label=\"Position (Optional)\" name=\"position\" value={form.position} onChange={handleChange} placeholder=\"Enter job position\" autoComplete=\"organization-title\" />\r\n                    <Input label=\"Salary (Optional)\" name=\"salary\" type=\"number\" step=\"0.01\" value={form.salary} onChange={handleChange} placeholder=\"Enter salary amount\" autoComplete=\"off\" />\r\n                    {!initialData.id && <Input label=\"Password (Required)\" name=\"password\" type=\"password\" value={form.password} onChange={handleChange} required placeholder=\"Enter password\" autoComplete=\"new-password\" />}\r\n                    {!initialData.id && <Select\r\n                        label=\"Role (Required)\"\r\n                        name=\"role\"\r\n                        value={form.role}\r\n                        onChange={handleChange}\r\n                        options={[\r\n                            { label: 'Employee', value: 'EMPLOYEE' },\r\n                            { label: 'HR', value: 'HR' },\r\n                            { label: 'Admin', value: 'ADMIN' }\r\n                        ]}\r\n                        placeholder=\"Select role\"\r\n                    />}\r\n                    <Select\r\n                        label=\"Department (Optional)\"\r\n                        name=\"departmentId\"\r\n                        value={form.departmentId}\r\n                        onChange={handleChange}\r\n                        loading={loadingDepartments ? 'true' : undefined}\r\n                        options={departments.map(dept => ({\r\n                            label: dept.name,\r\n                            value: dept.id.toString()\r\n                        }))}\r\n                        placeholder=\"Select department\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <Button type=\"submit\" size=\"small\" className=\"mt-4\" disabled={loading}>\r\n                {loading ? 'Saving...' : 'Save'}\r\n            </Button>\r\n        </form>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}