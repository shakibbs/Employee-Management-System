{"ast":null,"code":"import{Navigate}from\"react-router-dom\";import{useContext}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import Navbar from\"./Navbar\";import Sidebar from\"./Sidebar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProtectedLayout(_ref){let{children}=_ref;const{isAuthenticated,loading,user}=useContext(AuthContext);// Show loading spinner while checking authentication\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"})});}// Redirect to appropriate login page if not authenticated\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Redirect employees to employee login if they somehow access admin routes\nif((user===null||user===void 0?void 0:user.role)==='USER'){return/*#__PURE__*/_jsx(Navigate,{to:\"/employee-login\",replace:true});}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"main\",{className:\"p-6\",children:children})]})]});}","map":{"version":3,"names":["Navigate","useContext","AuthContext","Navbar","Sidebar","jsx","_jsx","jsxs","_jsxs","ProtectedLayout","_ref","children","isAuthenticated","loading","user","className","to","replace","role"],"sources":["E:/EMS/frontend/src/components/layout/ProtectedLayout.jsx"],"sourcesContent":["import { Navigate } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport Navbar from \"./Navbar\";\r\nimport Sidebar from \"./Sidebar\";\r\n\r\nexport default function ProtectedLayout({ children }) {\r\n    const { isAuthenticated, loading, user } = useContext(AuthContext);\r\n\r\n    // Show loading spinner while checking authentication\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Redirect to appropriate login page if not authenticated\r\n    if (!isAuthenticated) {\r\n        return <Navigate to=\"/login\" replace />;\r\n    }\r\n\r\n    // Redirect employees to employee login if they somehow access admin routes\r\n    if (user?.role === 'USER') {\r\n        return <Navigate to=\"/employee-login\" replace />;\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen bg-gray-100\">\r\n            <Sidebar />\r\n            <div className=\"flex-1 flex flex-col\">\r\n                <Navbar />\r\n                <main className=\"p-6\">{children}</main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,UAAU,KAAQ,OAAO,CAClC,OAASC,WAAW,KAAQ,2BAA2B,CACvD,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,cAAe,SAAS,CAAAC,eAAeA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAChD,KAAM,CAAEE,eAAe,CAAEC,OAAO,CAAEC,IAAK,CAAC,CAAGb,UAAU,CAACC,WAAW,CAAC,CAElE;AACA,GAAIW,OAAO,CAAE,CACT,mBACIP,IAAA,QAAKS,SAAS,CAAC,2DAA2D,CAAAJ,QAAA,cACtEL,IAAA,QAAKS,SAAS,CAAC,kEAAkE,CAAM,CAAC,CACvF,CAAC,CAEd,CAEA;AACA,GAAI,CAACH,eAAe,CAAE,CAClB,mBAAON,IAAA,CAACN,QAAQ,EAACgB,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CAC3C,CAEA;AACA,GAAI,CAAAH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,IAAI,IAAK,MAAM,CAAE,CACvB,mBAAOZ,IAAA,CAACN,QAAQ,EAACgB,EAAE,CAAC,iBAAiB,CAACC,OAAO,MAAE,CAAC,CACpD,CAEA,mBACIT,KAAA,QAAKO,SAAS,CAAC,+BAA+B,CAAAJ,QAAA,eAC1CL,IAAA,CAACF,OAAO,GAAE,CAAC,cACXI,KAAA,QAAKO,SAAS,CAAC,sBAAsB,CAAAJ,QAAA,eACjCL,IAAA,CAACH,MAAM,GAAE,CAAC,cACVG,IAAA,SAAMS,SAAS,CAAC,KAAK,CAAAJ,QAAA,CAAEA,QAAQ,CAAO,CAAC,EACtC,CAAC,EACL,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}