{"ast":null,"code":"import{useState,useEffect}from'react';import{getMyLeaveRequests}from'../../api/leaveService';import{Card,Button}from'../../components/ui';import{useToast}from'../../hooks/useToast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyLeaveRequests(){const[leaveRequests,setLeaveRequests]=useState([]);const[loading,setLoading]=useState(true);const toast=useToast();useEffect(()=>{const fetchLeaveRequests=async()=>{try{const data=await getMyLeaveRequests();setLeaveRequests(data);}catch(error){toast.error('Failed to fetch leave requests');console.error('Error fetching leave requests:',error);}finally{setLoading(false);}};fetchLeaveRequests();},[toast]);const getStatusColor=status=>{switch(status){case'PENDING':return'bg-yellow-100 text-yellow-800';case'APPROVED':return'bg-green-100 text-green-800';case'REJECTED':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading leave requests...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6\",children:\"My Leave Requests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:leaveRequests.length===0?/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-500\",children:\"No leave requests found\"})}):leaveRequests.map(request=>/*#__PURE__*/_jsx(Card,{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-start\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-lg\",children:request.leaveType}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(getStatusColor(request.status)),children:request.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Start Date: \",new Date(request.startDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"End Date: \",new Date(request.endDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Days: \",Math.ceil((new Date(request.endDate)-new Date(request.startDate))/(1000*60*60*24))+1]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Reason: \",request.reason]}),request.approvedBy&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Approved by: \",request.approvedBy]})]})]})})},request.id))})]});}","map":{"version":3,"names":["useState","useEffect","getMyLeaveRequests","Card","Button","useToast","jsx","_jsx","jsxs","_jsxs","MyLeaveRequests","leaveRequests","setLeaveRequests","loading","setLoading","toast","fetchLeaveRequests","data","error","console","getStatusColor","status","children","className","length","map","request","leaveType","concat","Date","startDate","toLocaleDateString","endDate","Math","ceil","reason","approvedBy","id"],"sources":["E:/EMS/frontend/src/pages/employees/MyLeaveRequests.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { getMyLeaveRequests } from '../../api/leaveService';\r\nimport { Card, Button } from '../../components/ui';\r\nimport { useToast } from '../../hooks/useToast';\r\n\r\nexport default function MyLeaveRequests() {\r\n    const [leaveRequests, setLeaveRequests] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const toast = useToast();\r\n\r\n    useEffect(() => {\r\n        const fetchLeaveRequests = async () => {\r\n            try {\r\n                const data = await getMyLeaveRequests();\r\n                setLeaveRequests(data);\r\n            } catch (error) {\r\n                toast.error('Failed to fetch leave requests');\r\n                console.error('Error fetching leave requests:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchLeaveRequests();\r\n    }, [toast]);\r\n\r\n    const getStatusColor = (status) => {\r\n        switch (status) {\r\n            case 'PENDING':\r\n                return 'bg-yellow-100 text-yellow-800';\r\n            case 'APPROVED':\r\n                return 'bg-green-100 text-green-800';\r\n            case 'REJECTED':\r\n                return 'bg-red-100 text-red-800';\r\n            default:\r\n                return 'bg-gray-100 text-gray-800';\r\n        }\r\n    };\r\n\r\n    if (loading) return <div>Loading leave requests...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"text-2xl font-bold mb-6\">My Leave Requests</h1>\r\n            <div className=\"grid gap-4\">\r\n                {leaveRequests.length === 0 ? (\r\n                    <Card className=\"p-6\">\r\n                        <div className=\"text-center text-gray-500\">No leave requests found</div>\r\n                    </Card>\r\n                ) : (\r\n                    leaveRequests.map((request) => (\r\n                        <Card key={request.id} className=\"p-6\">\r\n                            <div className=\"flex justify-between items-start\">\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center gap-3 mb-2\">\r\n                                        <h3 className=\"font-semibold text-lg\">{request.leaveType}</h3>\r\n                                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(request.status)}`}>\r\n                                            {request.status}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-600 space-y-1\">\r\n                                        <div>Start Date: {new Date(request.startDate).toLocaleDateString()}</div>\r\n                                        <div>End Date: {new Date(request.endDate).toLocaleDateString()}</div>\r\n                                        <div>Days: {Math.ceil((new Date(request.endDate) - new Date(request.startDate)) / (1000 * 60 * 60 * 24)) + 1}</div>\r\n                                        <div>Reason: {request.reason}</div>\r\n                                        {request.approvedBy && (\r\n                                            <div>Approved by: {request.approvedBy}</div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}