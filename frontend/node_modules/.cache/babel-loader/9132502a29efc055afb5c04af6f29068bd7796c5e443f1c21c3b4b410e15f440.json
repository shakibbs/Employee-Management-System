{"ast":null,"code":"import api from './apiClient';\n\n// Helper function to get current user role\nconst getCurrentUserRole = () => {\n  if (typeof window !== \"undefined\" && window.localStorage) {\n    const userStr = localStorage.getItem('user');\n    if (userStr) {\n      try {\n        const user = JSON.parse(userStr);\n        return (user === null || user === void 0 ? void 0 : user.role) || 'ROLE_EMPLOYEE';\n      } catch (e) {\n        console.error('Error parsing user from localStorage:', e);\n      }\n    }\n  }\n  return 'ROLE_EMPLOYEE';\n};\n\n// Get all notification/email logs\nexport const getNotifications = async () => {\n  const userRole = getCurrentUserRole();\n\n  // Check for employee role (with or without ROLE_ prefix for backward compatibility)\n  if (userRole === 'ROLE_EMPLOYEE' || userRole === 'EMPLOYEE') {\n    // Employees use the my-notifications endpoint\n    return (await api.get('/notifications/my-notifications')).data;\n  } else {\n    // Admin/HR can see all notifications\n    return (await api.get('/notifications')).data;\n  }\n};\n\n// Send email notification\nexport const sendNotification = async data => (await api.post('/notifications', data)).data;\n\n// Get notification by ID\nexport const getNotification = async id => (await api.get(`/notifications/${id}`)).data;\n\n// Delete notification\nexport const deleteNotification = async id => (await api.delete(`/notifications/${id}`)).data;","map":{"version":3,"names":["api","getCurrentUserRole","window","localStorage","userStr","getItem","user","JSON","parse","role","e","console","error","getNotifications","userRole","get","data","sendNotification","post","getNotification","id","deleteNotification","delete"],"sources":["E:/EMS/frontend/src/api/notificationService.js"],"sourcesContent":["import api from './apiClient';\r\n\r\n// Helper function to get current user role\r\nconst getCurrentUserRole = () => {\r\n    if (typeof window !== \"undefined\" && window.localStorage) {\r\n        const userStr = localStorage.getItem('user');\r\n        if (userStr) {\r\n            try {\r\n                const user = JSON.parse(userStr);\r\n                return user?.role || 'ROLE_EMPLOYEE';\r\n            } catch (e) {\r\n                console.error('Error parsing user from localStorage:', e);\r\n            }\r\n        }\r\n    }\r\n    return 'ROLE_EMPLOYEE';\r\n};\r\n\r\n// Get all notification/email logs\r\nexport const getNotifications = async () => {\r\n    const userRole = getCurrentUserRole();\r\n    \r\n    // Check for employee role (with or without ROLE_ prefix for backward compatibility)\r\n    if (userRole === 'ROLE_EMPLOYEE' || userRole === 'EMPLOYEE') {\r\n        // Employees use the my-notifications endpoint\r\n        return (await api.get('/notifications/my-notifications')).data;\r\n    } else {\r\n        // Admin/HR can see all notifications\r\n        return (await api.get('/notifications')).data;\r\n    }\r\n};\r\n\r\n// Send email notification\r\nexport const sendNotification = async (data) => (await api.post('/notifications', data)).data;\r\n\r\n// Get notification by ID\r\nexport const getNotification = async (id) => (await api.get(`/notifications/${id}`)).data;\r\n\r\n// Delete notification\r\nexport const deleteNotification = async (id) => (await api.delete(`/notifications/${id}`)).data;\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,aAAa;;AAE7B;AACA,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;EAC7B,IAAI,OAAOC,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,YAAY,EAAE;IACtD,MAAMC,OAAO,GAAGD,YAAY,CAACE,OAAO,CAAC,MAAM,CAAC;IAC5C,IAAID,OAAO,EAAE;MACT,IAAI;QACA,MAAME,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,OAAO,CAAC;QAChC,OAAO,CAAAE,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,IAAI,KAAI,eAAe;MACxC,CAAC,CAAC,OAAOC,CAAC,EAAE;QACRC,OAAO,CAACC,KAAK,CAAC,uCAAuC,EAAEF,CAAC,CAAC;MAC7D;IACJ;EACJ;EACA,OAAO,eAAe;AAC1B,CAAC;;AAED;AACA,OAAO,MAAMG,gBAAgB,GAAG,MAAAA,CAAA,KAAY;EACxC,MAAMC,QAAQ,GAAGb,kBAAkB,CAAC,CAAC;;EAErC;EACA,IAAIa,QAAQ,KAAK,eAAe,IAAIA,QAAQ,KAAK,UAAU,EAAE;IACzD;IACA,OAAO,CAAC,MAAMd,GAAG,CAACe,GAAG,CAAC,iCAAiC,CAAC,EAAEC,IAAI;EAClE,CAAC,MAAM;IACH;IACA,OAAO,CAAC,MAAMhB,GAAG,CAACe,GAAG,CAAC,gBAAgB,CAAC,EAAEC,IAAI;EACjD;AACJ,CAAC;;AAED;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAOD,IAAI,IAAK,CAAC,MAAMhB,GAAG,CAACkB,IAAI,CAAC,gBAAgB,EAAEF,IAAI,CAAC,EAAEA,IAAI;;AAE7F;AACA,OAAO,MAAMG,eAAe,GAAG,MAAOC,EAAE,IAAK,CAAC,MAAMpB,GAAG,CAACe,GAAG,CAAC,kBAAkBK,EAAE,EAAE,CAAC,EAAEJ,IAAI;;AAEzF;AACA,OAAO,MAAMK,kBAAkB,GAAG,MAAOD,EAAE,IAAK,CAAC,MAAMpB,GAAG,CAACsB,MAAM,CAAC,kBAAkBF,EAAE,EAAE,CAAC,EAAEJ,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}