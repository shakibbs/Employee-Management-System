{"ast":null,"code":"import{useNavigate,useParams}from'react-router-dom';import{getAttendanceByUser,markAttendance}from'../../api/attendanceService';import AttendanceForm from'../../components/forms/AttendanceForm';import{useToast}from'../../hooks/useToast';import{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AttendanceEdit(){const{userId}=useParams();const navigate=useNavigate();const[attendance,setAttendance]=useState(null);const[loading,setLoading]=useState(false);const toast=useToast();useEffect(()=>{getAttendanceByUser(userId).then(res=>setAttendance(res)).catch(()=>toast.error('Failed to fetch attendance.'));},[userId]);const handleSubmit=async formData=>{setLoading(true);try{await markAttendance(formData);// backend should update if record exists\ntoast.success('Attendance updated successfully!');navigate('/attendance');}catch(_unused){toast.error('Failed to update attendance.');}finally{setLoading(false);}};if(!attendance)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Edit Attendance\"}),/*#__PURE__*/_jsx(AttendanceForm,{initialData:attendance,onSubmit:handleSubmit,loading:loading})]});}","map":{"version":3,"names":["useNavigate","useParams","getAttendanceByUser","markAttendance","AttendanceForm","useToast","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AttendanceEdit","userId","navigate","attendance","setAttendance","loading","setLoading","toast","then","res","catch","error","handleSubmit","formData","success","_unused","children","className","initialData","onSubmit"],"sources":["E:/EMS/frontend/src/pages/attendance/AttendanceEdit.jsx"],"sourcesContent":["import { useNavigate, useParams } from 'react-router-dom';\r\nimport { getAttendanceByUser, markAttendance } from '../../api/attendanceService';\r\nimport AttendanceForm from '../../components/forms/AttendanceForm';\r\nimport { useToast } from '../../hooks/useToast';\r\nimport { useState, useEffect } from 'react';\r\n\r\nexport default function AttendanceEdit() {\r\n    const { userId } = useParams();\r\n    const navigate = useNavigate();\r\n    const [attendance, setAttendance] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const toast = useToast();\r\n\r\n\r\n    useEffect(() => {\r\n        getAttendanceByUser(userId)\r\n            .then((res) => setAttendance(res))\r\n            .catch(() => toast.error('Failed to fetch attendance.'));\r\n    }, [userId]);\r\n\r\n    const handleSubmit = async (formData) => {\r\n        setLoading(true);\r\n        try {\r\n            await markAttendance(formData); // backend should update if record exists\r\n            toast.success('Attendance updated successfully!');\r\n            navigate('/attendance');\r\n        } catch {\r\n            toast.error('Failed to update attendance.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!attendance) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <h1 className=\"text-2xl font-bold mb-4\">Edit Attendance</h1>\r\n            <AttendanceForm initialData={attendance} onSubmit={handleSubmit} loading={loading} />\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,OAASC,mBAAmB,CAAEC,cAAc,KAAQ,6BAA6B,CACjF,MAAO,CAAAC,cAAc,KAAM,uCAAuC,CAClE,OAASC,QAAQ,KAAQ,sBAAsB,CAC/C,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,cAAe,SAAS,CAAAC,cAAcA,CAAA,CAAG,CACrC,KAAM,CAAEC,MAAO,CAAC,CAAGZ,SAAS,CAAC,CAAC,CAC9B,KAAM,CAAAa,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACe,UAAU,CAAEC,aAAa,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAClD,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAa,KAAK,CAAGd,QAAQ,CAAC,CAAC,CAGxBE,SAAS,CAAC,IAAM,CACZL,mBAAmB,CAACW,MAAM,CAAC,CACtBO,IAAI,CAAEC,GAAG,EAAKL,aAAa,CAACK,GAAG,CAAC,CAAC,CACjCC,KAAK,CAAC,IAAMH,KAAK,CAACI,KAAK,CAAC,6BAA6B,CAAC,CAAC,CAChE,CAAC,CAAE,CAACV,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAW,YAAY,CAAG,KAAO,CAAAC,QAAQ,EAAK,CACrCP,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACA,KAAM,CAAAf,cAAc,CAACsB,QAAQ,CAAC,CAAE;AAChCN,KAAK,CAACO,OAAO,CAAC,kCAAkC,CAAC,CACjDZ,QAAQ,CAAC,aAAa,CAAC,CAC3B,CAAE,MAAAa,OAAA,CAAM,CACJR,KAAK,CAACI,KAAK,CAAC,8BAA8B,CAAC,CAC/C,CAAC,OAAS,CACNL,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAED,GAAI,CAACH,UAAU,CAAE,mBAAON,IAAA,QAAAmB,QAAA,CAAK,YAAU,CAAK,CAAC,CAE7C,mBACIjB,KAAA,QAAAiB,QAAA,eACInB,IAAA,OAAIoB,SAAS,CAAC,yBAAyB,CAAAD,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC5DnB,IAAA,CAACL,cAAc,EAAC0B,WAAW,CAAEf,UAAW,CAACgB,QAAQ,CAAEP,YAAa,CAACP,OAAO,CAAEA,OAAQ,CAAE,CAAC,EACpF,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}